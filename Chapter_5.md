# 继承

* 类，超类和子类
* Object：所有类的超类
* 范型数组列表
* 对象包装器与自动装箱
* 参数数量可变的方法
* 枚举类
* 反射
* 继承的设计技巧

继承，人们可以基于已存在的类构造一个新类，继承已存在的类就是复用（继承）这些类的方法和域。在此基础上，还可以添加一些新的方法和域，已满足新
的需求。

另外，本章还阐述了反射的概念。反射是指在程序运行期间发现更多的类及其属性的能力。

## 类，超类和子类

### 定义子类

下面是由继承Employee类来定义Manager类的格式，关键字`extends`表示继承。

```java7
public class Manager extends Employee
{
  //添加方法和域
}
```

下面定一个Manager子类

```java7
public class Manager extends Employee
{
  private double bonus;
  ...
  public void setBonus(double bonus)
  {
    this.bonus=bonus;
  }
}
```

### 覆盖方法

在子类中改写超类中的函数（同名称）即可。

```java7
public double getSalary(){
  double baseSalary=super.getSalary();
  return baseSalary+bonus;
}
```

我们来解释这段代码，因为子类不能访问超类的私有域，所有需要使用公有方法访问salary数据，但由于调用`getSalary`方法首先考虑子类的方法，
所以要加入`super`表示调用父类的方法。

虽然子类可以添加域和方法，也可以重写方法，然而绝对不能删除继承的任何域和方法。

### 子类构造器

这里提供一个子类构造器

```java7
public Manager(String name,doule salary,int year,int month,int day)
{
  super(name,salary,year,month,day);
  bonus=0;
}
```

如果子类的构造器没有显示地调用超类的构造器，则将自动地调用超类默认（无参数）的构造器。如果超类没有不带参数的构造器，并且在子类的构造器中
又没有显示地调用超类的其他构造器，则报错。

### 继承层次

由一个公共超类派生出来的所有类的集合被称为继承层次，在继承层次中，从某个特定的类到其祖先的路径被称为该类的继承链。

### 多态

在java中，对象变量是多态的。一个Employee变量既可以引用一个Employee类对象，也可以引用一个Employee类的任何一个子类的对象。

### 理解方法调用

弄清楚如何在对象上应用方法调用非常简单。下面假设要调用`x.f(args)`，隐式参数`x`声明为类C的一个对象。下面是调用过程的详细描述：

1. 编译器查看对象的声明类型和方法名。假设调用`x.f(param)`，且隐式参数`x`声明为C类的对象。需要注意的是：有可能存在多个名字为f，但参数类型不一样的方法。编译器将会一一列举所有C类中名为f的方法和其超类中访问属性为public且名为f的方法。
2. 编译器将查看调用方法时候提供的参数类型。如果有一个与提供的参数类型完全匹配的，就用这方法。否则，报错。
3. 如果是private，static，final方法或者构造器，那么编译器将可以准确地知道应该调用哪个方法，我们将这种调用方式称为静态绑定。与此对应，调用的方法依赖于隐式参数的实际类型，并且在运行时候实现动态绑定。
4. 当程序运行，并且采用动态绑定调用方法时，虚拟机一定调用与x所引用对象的实际类型最合适的那个类的方法。

### 阻止继承：final类和方法

如果在定义类的时候使用类final修饰符，就表明这个类是final类，就可以阻止使用这个类定义子类，格式：

```java7
public final class aaa
{
  ...
}
```

如果类中的特定方法被声明为final，则子类就不能覆盖这个方法了。

### 强制类型转换

有时候需要将某个类的对象引用转换成另一个类的对象引用，格式：

```java7
Manager boss=(Manager) staff[0];
```

进行类型转换的唯一原因是：在暂时忽略对象的实际类型之后，使用对象的全部功能。在java中，每个对象变量都属于一个类型，类型描述了这个变量所引用的以及能够引用的对象类型。

* 只能在继承层次内进行类型转换
* 在将超类转换成子类之前，应该使用`aa instanceof typename`进行检查

### 抽象类

待续

### 受保护访问

待续

## Object：所有类的超类

这一点和python是一样的，在上节强制类型转换中，object类型变量可以引用各种对象。

### equals方法

Object类中的`equals`方法用于检测一个对象是否等于另一个对象。在对象类中，这个方法将判断两个对象是否具有相同的引用。如果两个对象具有相同的引用，它们一定是相等的。
